parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Spxq":[function(require,module,exports) {
"use strict";var E,e,t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.y=exports.x=exports.Y=void 0,exports.Y=E,function(E){E[E.RED=.2126]="RED",E[E.GREEN=.7152]="GREEN",E[E.BLUE=.0722]="BLUE",E[E.WHITE=1]="WHITE"}(E||(exports.Y=E={})),exports.x=e,function(E){E[E.RED=.64]="RED",E[E.GREEN=.3]="GREEN",E[E.BLUE=.15]="BLUE",E[E.WHITE=.3127]="WHITE"}(e||(exports.x=e={})),exports.y=t,function(E){E[E.RED=.33]="RED",E[E.GREEN=.6]="GREEN",E[E.BLUE=.06]="BLUE",E[E.WHITE=.329]="WHITE"}(t||(exports.y=t={}));
},{}],"TlpJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.bt709=void 0;var e=r(require("./bt709"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t();if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var f=o?Object.getOwnPropertyDescriptor(e,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=e[u]}return n.default=e,r&&r.set(e,n),n}exports.bt709=e;
},{"./bt709":"Spxq"}],"pYSN":[function(require,module,exports) {
"use strict";function e(e){return e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92}function t(t,r,n){return{x:.4124*(t=e(t/255))+.3576*(r=e(r/255))+.1805*(n=e(n/255)),y:.2126*t+.7152*r+.0722*n,z:.0193*t+.1192*r+.9505*n}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgb2xyz=t;
},{}],"b3mL":[function(require,module,exports) {
"use strict";function t(t){return t*(Math.PI/180)}function n(t,n,e){let r=t;return r<n&&(r=n),r<e&&(r=e),r}function e(t,n,e){let r=t;return r>n&&(r=n),r>e&&(r=e),r}function r(t,n,e){return t>e&&(t=e),t<n&&(t=n),0|t}function o(t){return(t=Math.round(t))>255?t=255:t<0&&(t=0),t}function u(t){return t>255?t=255:t<0&&(t=0),t}function s(t,n){const e=typeof t[0];let r;if("number"===e||"string"===e){const e=Object.create(null);for(let n=0,r=t.length;n<r;n++){const r=t[n];e[r]||0===e[r]||(e[r]=n)}r=t.sort(function(t,r){return n(t,r)||e[t]-e[r]})}else{const e=t.slice(0);r=t.sort(function(t,r){return n(t,r)||e.indexOf(t)-e.indexOf(r)})}return r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.degrees2radians=t,exports.max3=n,exports.min3=e,exports.intInRange=r,exports.inRange0to255Rounded=o,exports.inRange0to255=u,exports.stableSort=s;
},{}],"RhPC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgb2hsl=t;var e=require("../utils/arithmetic");function t(t,r,s){const i=(0,e.min3)(t,r,s),l=(0,e.max3)(t,r,s),u=l-i,n=(i+l)/510;let o=0;n>0&&n<1&&(o=u/(n<.5?l+i:510-l-i));let c=0;return u>0&&(c=l===t?(r-s)/u:l===r?2+(s-t)/u:4+(t-r)/u,(c*=60)<0&&(c+=360)),{h:c,s:o,l:n}}
},{"../utils/arithmetic":"b3mL"}],"dYwZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xyz2lab=n;const t=.95047,e=1,r=1.08883;function o(t){return t>.008856?Math.pow(t,1/3):7.787*t+16/116}function n(n,u,x){if(n=o(n/t),u=o(u/e),x=o(x/r),116*u-16<0)throw new Error("xxx");return{L:Math.max(0,116*u-16),a:500*(n-u),b:200*(u-x)}}
},{}],"mK7q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgb2lab=t;var e=require("./rgb2xyz"),r=require("./xyz2lab");function t(t,b,u){const x=(0,e.rgb2xyz)(t,b,u);return(0,r.xyz2lab)(x.x,x.y,x.z)}
},{"./rgb2xyz":"pYSN","./xyz2lab":"dYwZ"}],"OfSb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lab2xyz=r;const t=.95047,e=1,n=1.08883;function o(t){return t>.206893034?Math.pow(t,3):(t-16/116)/7.787}function r(r,s,u){const c=(r+16)/116,i=c-u/200;return{x:t*o(s/500+c),y:e*o(c),z:n*o(i)}}
},{}],"RJ9n":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xyz2rgb=n;var e=require("../utils/arithmetic");function t(e){return e>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e}function n(n,r,o){const u=t(3.2406*n+-1.5372*r+-.4986*o),i=t(-.9689*n+1.8758*r+.0415*o),d=t(.0557*n+-.204*r+1.057*o);return{r:(0,e.inRange0to255Rounded)(255*u),g:(0,e.inRange0to255Rounded)(255*i),b:(0,e.inRange0to255Rounded)(255*d)}}
},{"../utils/arithmetic":"b3mL"}],"RhbY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lab2rgb=t;var e=require("./lab2xyz"),r=require("./xyz2rgb");function t(t,b,u){const x=(0,e.lab2xyz)(t,b,u);return(0,r.xyz2rgb)(x.x,x.y,x.z)}
},{"./lab2xyz":"OfSb","./xyz2rgb":"RJ9n"}],"T7GD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"rgb2xyz",{enumerable:!0,get:function(){return e.rgb2xyz}}),Object.defineProperty(exports,"rgb2hsl",{enumerable:!0,get:function(){return r.rgb2hsl}}),Object.defineProperty(exports,"rgb2lab",{enumerable:!0,get:function(){return t.rgb2lab}}),Object.defineProperty(exports,"lab2xyz",{enumerable:!0,get:function(){return b.lab2xyz}}),Object.defineProperty(exports,"lab2rgb",{enumerable:!0,get:function(){return n.lab2rgb}}),Object.defineProperty(exports,"xyz2lab",{enumerable:!0,get:function(){return u.xyz2lab}}),Object.defineProperty(exports,"xyz2rgb",{enumerable:!0,get:function(){return l.xyz2rgb}});var e=require("./rgb2xyz"),r=require("./rgb2hsl"),t=require("./rgb2lab"),b=require("./lab2xyz"),n=require("./lab2rgb"),u=require("./xyz2lab"),l=require("./xyz2rgb");
},{"./rgb2xyz":"pYSN","./rgb2hsl":"RhPC","./rgb2lab":"mK7q","./lab2xyz":"OfSb","./lab2rgb":"RhbY","./xyz2lab":"dYwZ","./xyz2rgb":"RJ9n"}],"rtya":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractDistanceCalculator=void 0;class t{constructor(){this._setDefaults(),this.setWhitePoint(255,255,255,255)}setWhitePoint(t,a,e,s){this._whitePoint={r:t>0?255/t:0,g:a>0?255/a:0,b:e>0?255/e:0,a:s>0?255/s:0},this._maxDistance=this.calculateRaw(t,a,e,s,0,0,0,0)}calculateNormalized(t,a){return this.calculateRaw(t.r,t.g,t.b,t.a,a.r,a.g,a.b,a.a)/this._maxDistance}}exports.AbstractDistanceCalculator=t;
},{}],"MS9V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CIE94GraphicArts=exports.CIE94Textiles=exports.AbstractCIE94=void 0;var t=require("./distanceCalculator"),s=require("../conversion/rgb2lab"),e=require("../utils/arithmetic");class i extends t.AbstractDistanceCalculator{calculateRaw(t,i,a,r,h,o,n,l){const _=(0,s.rgb2lab)((0,e.inRange0to255)(t*this._whitePoint.r),(0,e.inRange0to255)(i*this._whitePoint.g),(0,e.inRange0to255)(a*this._whitePoint.b)),c=(0,s.rgb2lab)((0,e.inRange0to255)(h*this._whitePoint.r),(0,e.inRange0to255)(o*this._whitePoint.g),(0,e.inRange0to255)(n*this._whitePoint.b)),b=_.L-c.L,p=_.a-c.a,u=_.b-c.b,w=Math.sqrt(_.a*_.a+_.b*_.b),x=w-Math.sqrt(c.a*c.a+c.b*c.b);let g=p*p+u*u-x*x;g=g<0?0:Math.sqrt(g);const K=(l-r)*this._whitePoint.a*this._kA;return Math.sqrt(Math.pow(b/this._Kl,2)+Math.pow(x/(1+this._K1*w),2)+Math.pow(g/(1+this._K2*w),2)+Math.pow(K,2))}}exports.AbstractCIE94=i;class a extends i{_setDefaults(){this._Kl=2,this._K1=.048,this._K2=.014,this._kA=12.5/255}}exports.CIE94Textiles=a;class r extends i{_setDefaults(){this._Kl=1,this._K1=.045,this._K2=.015,this._kA=25/255}}exports.CIE94GraphicArts=r;
},{"./distanceCalculator":"rtya","../conversion/rgb2lab":"mK7q","../utils/arithmetic":"b3mL"}],"oVGY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CIEDE2000=void 0;var a=require("./distanceCalculator"),t=require("../conversion/rgb2lab"),e=require("../utils/arithmetic");class n extends a.AbstractDistanceCalculator{_setDefaults(){}static _calculatehp(a,t){const e=Math.atan2(a,t);return e>=0?e:e+n._deg360InRad}static _calculateRT(a,t){const e=Math.pow(t,7),s=2*Math.sqrt(e/(e+n._pow25to7)),d=n._deg30InRad*Math.exp(-Math.pow((a-n._deg275InRad)/n._deg25InRad,2));return-Math.sin(2*d)*s}static _calculateT(a){return 1-.17*Math.cos(a-n._deg30InRad)+.24*Math.cos(2*a)+.32*Math.cos(3*a+n._deg6InRad)-.2*Math.cos(4*a-n._deg63InRad)}static _calculate_ahp(a,t,e,s){const d=e+s;return 0===a?d:t<=n._deg180InRad?d/2:d<n._deg360InRad?(d+n._deg360InRad)/2:(d-n._deg360InRad)/2}static _calculate_dHp(a,t,e,s){let d;return d=0===a?0:t<=n._deg180InRad?e-s:e<=s?e-s+n._deg360InRad:e-s-n._deg360InRad,2*Math.sqrt(a)*Math.sin(d/2)}calculateRaw(a,s,d,r,i,c,_,h){const o=(0,t.rgb2lab)((0,e.inRange0to255)(a*this._whitePoint.r),(0,e.inRange0to255)(s*this._whitePoint.g),(0,e.inRange0to255)(d*this._whitePoint.b)),l=(0,t.rgb2lab)((0,e.inRange0to255)(i*this._whitePoint.r),(0,e.inRange0to255)(c*this._whitePoint.g),(0,e.inRange0to255)(_*this._whitePoint.b)),g=(h-r)*this._whitePoint.a*n._kA,R=this.calculateRawInLab(o,l);return Math.sqrt(R+g*g)}calculateRawInLab(a,t){const e=a.L,s=a.a,d=a.b,r=t.L,i=t.a,c=t.b,_=Math.sqrt(s*s+d*d),h=Math.sqrt(i*i+c*c),o=Math.pow((_+h)/2,7),l=.5*(1-Math.sqrt(o/(o+n._pow25to7))),g=(1+l)*s,R=(1+l)*i,u=Math.sqrt(g*g+d*d),M=Math.sqrt(R*R+c*c),I=u*M,p=n._calculatehp(d,g),w=n._calculatehp(c,R),b=Math.abs(p-w),q=r-e,P=M-u,x=n._calculate_dHp(I,b,w,p),v=n._calculate_ahp(I,b,p,w),C=n._calculateT(v),D=(u+M)/2,E=Math.pow((e+r)/2-50,2),L=1+.015*E/Math.sqrt(20+E),T=1+.045*D,A=1+.015*C*D,f=n._calculateRT(v,D),k=q/L,H=P/T,j=x/A;return Math.pow(k,2)+Math.pow(H,2)+Math.pow(j,2)+f*H*j}}exports.CIEDE2000=n,n._kA=25/255,n._pow25to7=Math.pow(25,7),n._deg360InRad=(0,e.degrees2radians)(360),n._deg180InRad=(0,e.degrees2radians)(180),n._deg30InRad=(0,e.degrees2radians)(30),n._deg6InRad=(0,e.degrees2radians)(6),n._deg63InRad=(0,e.degrees2radians)(63),n._deg275InRad=(0,e.degrees2radians)(275),n._deg25InRad=(0,e.degrees2radians)(25);
},{"./distanceCalculator":"rtya","../conversion/rgb2lab":"mK7q","../utils/arithmetic":"b3mL"}],"FZPz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CMetric=void 0;var t=require("./distanceCalculator");class e extends t.AbstractDistanceCalculator{calculateRaw(t,e,i,s,r,a,o,c){const h=(t+r)/2*this._whitePoint.r,n=(t-r)*this._whitePoint.r,l=(e-a)*this._whitePoint.g,u=(i-o)*this._whitePoint.b,_=((512+h)*n*n>>8)+4*l*l+((767-h)*u*u>>8),w=(c-s)*this._whitePoint.a;return Math.sqrt(_+w*w)}_setDefaults(){}}exports.CMetric=e;
},{"./distanceCalculator":"rtya"}],"Nul3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EuclideanBT709NoAlpha=exports.EuclideanBT709=exports.Euclidean=exports.AbstractEuclidean=void 0;var t=require("./distanceCalculator"),s=require("../constants/bt709");class e extends t.AbstractDistanceCalculator{calculateRaw(t,s,e,a,i,c,l,r){const _=i-t,u=c-s,h=l-e,n=r-a;return Math.sqrt(this._kR*_*_+this._kG*u*u+this._kB*h*h+this._kA*n*n)}}exports.AbstractEuclidean=e;class a extends e{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}}exports.Euclidean=a;class i extends e{_setDefaults(){this._kR=s.Y.RED,this._kG=s.Y.GREEN,this._kB=s.Y.BLUE,this._kA=1}}exports.EuclideanBT709=i;class c extends e{_setDefaults(){this._kR=s.Y.RED,this._kG=s.Y.GREEN,this._kB=s.Y.BLUE,this._kA=0}}exports.EuclideanBT709NoAlpha=c;
},{"./distanceCalculator":"rtya","../constants/bt709":"Spxq"}],"rGhK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ManhattanBT709=exports.ManhattanNommyde=exports.Manhattan=exports.AbstractManhattan=void 0;var t=require("./distanceCalculator"),s=require("../constants/bt709");class a extends t.AbstractDistanceCalculator{calculateRaw(t,s,a,e,n,h,r,i){let _=n-t,o=h-s,c=r-a,k=i-e;return _<0&&(_=0-_),o<0&&(o=0-o),c<0&&(c=0-c),k<0&&(k=0-k),this._kR*_+this._kG*o+this._kB*c+this._kA*k}}exports.AbstractManhattan=a;class e extends a{_setDefaults(){this._kR=1,this._kG=1,this._kB=1,this._kA=1}}exports.Manhattan=e;class n extends a{_setDefaults(){this._kR=.4984,this._kG=.8625,this._kB=.2979,this._kA=1}}exports.ManhattanNommyde=n;class h extends a{_setDefaults(){this._kR=s.Y.RED,this._kG=s.Y.GREEN,this._kB=s.Y.BLUE,this._kA=1}}exports.ManhattanBT709=h;
},{"./distanceCalculator":"rtya","../constants/bt709":"Spxq"}],"VUdH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PNGQuant=void 0;var t=require("./distanceCalculator");class e extends t.AbstractDistanceCalculator{calculateRaw(t,e,i,r,s,o,h,n){const c=(n-r)*this._whitePoint.a;return this._colordifferenceCh(t*this._whitePoint.r,s*this._whitePoint.r,c)+this._colordifferenceCh(e*this._whitePoint.g,o*this._whitePoint.g,c)+this._colordifferenceCh(i*this._whitePoint.b,h*this._whitePoint.b,c)}_colordifferenceCh(t,e,i){const r=t-e,s=r+i;return r*r+s*s}_setDefaults(){}}exports.PNGQuant=e;
},{"./distanceCalculator":"rtya"}],"a183":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AbstractDistanceCalculator",{enumerable:!0,get:function(){return e.AbstractDistanceCalculator}}),Object.defineProperty(exports,"CIE94Textiles",{enumerable:!0,get:function(){return t.CIE94Textiles}}),Object.defineProperty(exports,"CIE94GraphicArts",{enumerable:!0,get:function(){return t.CIE94GraphicArts}}),Object.defineProperty(exports,"CIEDE2000",{enumerable:!0,get:function(){return r.CIEDE2000}}),Object.defineProperty(exports,"CMetric",{enumerable:!0,get:function(){return n.CMetric}}),Object.defineProperty(exports,"AbstractEuclidean",{enumerable:!0,get:function(){return a.AbstractEuclidean}}),Object.defineProperty(exports,"Euclidean",{enumerable:!0,get:function(){return a.Euclidean}}),Object.defineProperty(exports,"EuclideanBT709NoAlpha",{enumerable:!0,get:function(){return a.EuclideanBT709NoAlpha}}),Object.defineProperty(exports,"EuclideanBT709",{enumerable:!0,get:function(){return a.EuclideanBT709}}),Object.defineProperty(exports,"AbstractManhattan",{enumerable:!0,get:function(){return u.AbstractManhattan}}),Object.defineProperty(exports,"Manhattan",{enumerable:!0,get:function(){return u.Manhattan}}),Object.defineProperty(exports,"ManhattanBT709",{enumerable:!0,get:function(){return u.ManhattanBT709}}),Object.defineProperty(exports,"ManhattanNommyde",{enumerable:!0,get:function(){return u.ManhattanNommyde}}),Object.defineProperty(exports,"PNGQuant",{enumerable:!0,get:function(){return c.PNGQuant}});var e=require("./distanceCalculator"),t=require("./cie94"),r=require("./ciede2000"),n=require("./cmetric"),a=require("./euclidean"),u=require("./manhattan"),c=require("./pngQuant");
},{"./distanceCalculator":"rtya","./cie94":"MS9V","./ciede2000":"oVGY","./cmetric":"FZPz","./euclidean":"Nul3","./manhattan":"rGhK","./pngQuant":"VUdH"}],"gm7f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractPaletteQuantizer=void 0;class e{quantizeSync(){for(const e of this.quantize())if(e.palette)return e.palette;throw new Error("unreachable")}}exports.AbstractPaletteQuantizer=e;
},{}],"AzZH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Point=void 0;var t=require("../constants/bt709");class i{static createByQuadruplet(t){const s=new i;return s.r=0|t[0],s.g=0|t[1],s.b=0|t[2],s.a=0|t[3],s._loadUINT32(),s._loadQuadruplet(),s}static createByRGBA(t,s,a,r){const h=new i;return h.r=0|t,h.g=0|s,h.b=0|a,h.a=0|r,h._loadUINT32(),h._loadQuadruplet(),h}static createByUint32(t){const s=new i;return s.uint32=t>>>0,s._loadRGBA(),s._loadQuadruplet(),s}constructor(){this.uint32=-1>>>0,this.r=this.g=this.b=this.a=0,this.rgba=new Array(4),this.rgba[0]=0,this.rgba[1]=0,this.rgba[2]=0,this.rgba[3]=0}from(t){this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this.uint32=t.uint32,this.rgba[0]=t.r,this.rgba[1]=t.g,this.rgba[2]=t.b,this.rgba[3]=t.a}getLuminosity(i){let s=this.r,a=this.g,r=this.b;return i&&(s=Math.min(255,255-this.a+this.a*s/255),a=Math.min(255,255-this.a+this.a*a/255),r=Math.min(255,255-this.a+this.a*r/255)),s*t.Y.RED+a*t.Y.GREEN+r*t.Y.BLUE}_loadUINT32(){this.uint32=(this.a<<24|this.b<<16|this.g<<8|this.r)>>>0}_loadRGBA(){this.r=255&this.uint32,this.g=this.uint32>>>8&255,this.b=this.uint32>>>16&255,this.a=this.uint32>>>24&255}_loadQuadruplet(){this.rgba[0]=this.r,this.rgba[1]=this.g,this.rgba[2]=this.b,this.rgba[3]=this.a}}exports.Point=i;
},{"../constants/bt709":"Spxq"}],"zKNk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointContainer=void 0;var t=require("./point");class r{constructor(){this._width=0,this._height=0,this._pointArray=[]}getWidth(){return this._width}getHeight(){return this._height}setWidth(t){this._width=t}setHeight(t){this._height=t}getPointArray(){return this._pointArray}clone(){const e=new r;e._width=this._width,e._height=this._height;for(let r=0,i=this._pointArray.length;r<i;r++)e._pointArray[r]=t.Point.createByUint32(0|this._pointArray[r].uint32);return e}toUint32Array(){const t=this._pointArray.length,r=new Uint32Array(t);for(let e=0;e<t;e++)r[e]=this._pointArray[e].uint32;return r}toUint8Array(){return new Uint8Array(this.toUint32Array().buffer)}static fromHTMLImageElement(t){const e=t.naturalWidth,i=t.naturalHeight,n=document.createElement("canvas");return n.width=e,n.height=i,n.getContext("2d").drawImage(t,0,0,e,i,0,0,e,i),r.fromHTMLCanvasElement(n)}static fromHTMLCanvasElement(t){const e=t.width,i=t.height,n=t.getContext("2d").getImageData(0,0,e,i);return r.fromImageData(n)}static fromImageData(t){const e=t.width,i=t.height;return r.fromUint8Array(t.data,e,i)}static fromUint8Array(t,e,i){switch(Object.prototype.toString.call(t)){case"[object Uint8ClampedArray]":case"[object Uint8Array]":break;default:t=new Uint8Array(t)}const n=new Uint32Array(t.buffer);return r.fromUint32Array(n,e,i)}static fromUint32Array(e,i,n){const a=new r;a._width=i,a._height=n;for(let r=0,o=e.length;r<o;r++)a._pointArray[r]=t.Point.createByUint32(0|e[r]);return a}static fromBuffer(t,e,i){const n=new Uint32Array(t.buffer,t.byteOffset,t.byteLength/Uint32Array.BYTES_PER_ELEMENT);return r.fromUint32Array(n,e,i)}}exports.PointContainer=r;
},{"./point":"AzZH"}],"KCSi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hueGroup=e,exports.Palette=void 0;var t=require("./pointContainer"),r=require("../conversion/rgb2hsl");const i=10;function e(t,r){const i=360/r;for(let e=1,n=i-i/2;e<r;e++,n+=i)if(t>=n&&t<n+i)return e;return 0}class n{constructor(){this._pointArray=[],this._i32idx={},this._pointContainer=new t.PointContainer,this._pointContainer.setHeight(1),this._pointArray=this._pointContainer.getPointArray()}add(t){this._pointArray.push(t),this._pointContainer.setWidth(this._pointArray.length)}has(t){for(let r=this._pointArray.length-1;r>=0;r--)if(t.uint32===this._pointArray[r].uint32)return!0;return!1}getNearestColor(t,r){return this._pointArray[0|this._getNearestIndex(t,r)]}getPointContainer(){return this._pointContainer}_nearestPointFromCache(t){return"number"==typeof this._i32idx[t]?this._i32idx[t]:-1}_getNearestIndex(t,r){let i=this._nearestPointFromCache(""+r.uint32);if(i>=0)return i;let e=Number.MAX_VALUE;i=0;for(let n=0,o=this._pointArray.length;n<o;n++){const o=this._pointArray[n],s=t.calculateRaw(r.r,r.g,r.b,r.a,o.r,o.g,o.b,o.a);s<e&&(e=s,i=n)}return this._i32idx[r.uint32]=i,i}sort(){this._i32idx={},this._pointArray.sort((t,n)=>{const o=(0,r.rgb2hsl)(t.r,t.g,t.b),s=(0,r.rgb2hsl)(n.r,n.g,n.b),a=t.r===t.g&&t.g===t.b?0:1+e(o.h,i),h=(n.r===n.g&&n.g===n.b?0:1+e(s.h,i))-a;if(h)return-h;const u=t.getLuminosity(!0),_=n.getLuminosity(!0);if(_-u!=0)return _-u;const p=(100*s.s|0)-(100*o.s|0);return p?-p:0})}}exports.Palette=n;
},{"./pointContainer":"zKNk","../conversion/rgb2hsl":"RhPC"}],"sduU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.HueStatistics=void 0;var s=require("../conversion/rgb2hsl"),t=require("./palette");class i{constructor(){this.num=0,this.cols=[]}}class o{constructor(s,t){this._numGroups=s,this._minCols=t,this._stats=[];for(let o=0;o<=s;o++)this._stats[o]=new i;this._groupsFull=0}check(i){this._groupsFull===this._numGroups+1&&(this.check=function(){});const o=255&i,u=i>>>8&255,r=i>>>16&255,h=o===u&&u===r?0:1+(0,t.hueGroup)((0,s.rgb2hsl)(o,u,r).h,this._numGroups),n=this._stats[h],e=this._minCols;n.num++,n.num>e||(n.num===e&&this._groupsFull++,n.num<=e&&this._stats[h].cols.push(i))}injectIntoDictionary(s){for(let t=0;t<=this._numGroups;t++)this._stats[t].num<=this._minCols&&this._stats[t].cols.forEach(t=>{s[t]?s[t]++:s[t]=1})}injectIntoArray(s){for(let t=0;t<=this._numGroups;t++)this._stats[t].num<=this._minCols&&this._stats[t].cols.forEach(t=>{-1===s.indexOf(t)&&s.push(t)})}}exports.HueStatistics=o;
},{"../conversion/rgb2hsl":"RhPC","./palette":"KCSi"}],"ywMQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ProgressTracker=void 0;class s{constructor(t,e){this._range=t,this._progressRange=e,this._step=Math.max(1,this._range/(s.steps+1)|0),this._last=-this._step,this.progress=0}shouldNotify(s){return s-this._last>=this._step&&(this._last=s,this.progress=Math.min(this._progressRange*this._last/this._range,this._progressRange),!0)}}exports.ProgressTracker=s,s.steps=100;
},{}],"MRhM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"HueStatistics",{enumerable:!0,get:function(){return t.HueStatistics}}),Object.defineProperty(exports,"Palette",{enumerable:!0,get:function(){return r.Palette}}),Object.defineProperty(exports,"Point",{enumerable:!0,get:function(){return n.Point}}),Object.defineProperty(exports,"PointContainer",{enumerable:!0,get:function(){return i.PointContainer}}),Object.defineProperty(exports,"ProgressTracker",{enumerable:!0,get:function(){return o.ProgressTracker}}),exports.arithmetic=void 0;var e=a(require("./arithmetic"));exports.arithmetic=e;var t=require("./hueStatistics"),r=require("./palette"),n=require("./point"),i=require("./pointContainer"),o=require("./progressTracker");function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=n?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}
},{"./arithmetic":"b3mL","./hueStatistics":"sduU","./palette":"KCSi","./point":"AzZH","./pointContainer":"zKNk","./progressTracker":"ywMQ"}],"TSYH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NeuQuant=void 0;var t=require("../../utils/palette"),i=require("../../utils/point"),e=require("../paletteQuantizer"),s=require("../../utils");const a=3;class r{constructor(t){this.r=this.g=this.b=this.a=t}toPoint(){return i.Point.createByRGBA(this.r>>a,this.g>>a,this.b>>a,this.a>>a)}subtract(t,i,e,s){this.r-=0|t,this.g-=0|i,this.b-=0|e,this.a-=0|s}}class _ extends e.AbstractPaletteQuantizer{constructor(t,i=256){super(),this._distance=t,this._pointArray=[],this._sampleFactor=1,this._networkSize=i,this._distance.setWhitePoint(255<<a,255<<a,255<<a,255<<a)}sample(t){this._pointArray=this._pointArray.concat(t.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let t=0;t<this._networkSize;t++)this._network[t]=new r((t<<a+8)/this._networkSize|0),this._freq[t]=_._initialBias/this._networkSize|0,this._bias[t]=0}*_learn(){let t=this._sampleFactor;const i=this._pointArray.length;i<_._minpicturebytes&&(t=1);const e=30+(t-1)/3|0,r=i/t|0;let h,n=r/_._nCycles|0,o=_._initAlpha,l=(this._networkSize>>3)*_._radiusBias,c=l>>_._radiusBiasShift;c<=1&&(c=0);for(let s=0;s<c;s++)this._radPower[s]=o*((c*c-s*s)*_._radBias/(c*c))>>>0;h=i<_._minpicturebytes?1:i%_._prime1!=0?_._prime1:i%_._prime2!=0?_._prime2:i%_._prime3!=0?_._prime3:_._prime4;const p=new s.ProgressTracker(r,99);for(let s=0,u=0;s<r;){p.shouldNotify(s)&&(yield{progress:p.progress});const t=this._pointArray[u],r=t.b<<a,f=t.g<<a,d=t.r<<a,b=t.a<<a,S=this._contest(r,f,d,b);if(this._alterSingle(o,S,r,f,d,b),0!==c&&this._alterNeighbour(c,S,r,f,d,b),(u+=h)>=i&&(u-=i),0===n&&(n=1),++s%n==0){o-=o/e|0,(c=(l-=l/_._radiusDecrease|0)>>_._radiusBiasShift)<=1&&(c=0);for(let t=0;t<c;t++)this._radPower[t]=o*((c*c-t*t)*_._radBias/(c*c))>>>0}}}_buildPalette(){const i=new t.Palette;return this._network.forEach(t=>{i.add(t.toPoint())}),i.sort(),i}_alterNeighbour(t,i,e,s,a,r){let h=i-t;h<-1&&(h=-1);let n=i+t;n>this._networkSize&&(n=this._networkSize);let o=i+1,l=i-1,c=1;for(;o<n||l>h;){const t=this._radPower[c++]/_._alphaRadBias;if(o<n){const i=this._network[o++];i.subtract(t*(i.r-a),t*(i.g-s),t*(i.b-e),t*(i.a-r))}if(l>h){const i=this._network[l--];i.subtract(t*(i.r-a),t*(i.g-s),t*(i.b-e),t*(i.a-r))}}}_alterSingle(t,i,e,s,a,r){t/=_._initAlpha;const h=this._network[i];h.subtract(t*(h.r-a),t*(h.g-s),t*(h.b-e),t*(h.a-r))}_contest(t,i,e,s){const r=1020<<a;let h=~(1<<31),n=h,o=-1,l=o;for(let c=0;c<this._networkSize;c++){const p=this._network[c],u=this._distance.calculateNormalized(p,{r:e,g:i,b:t,a:s})*r|0;u<h&&(h=u,o=c);const f=u-(this._bias[c]>>_._initialBiasShift-a);f<n&&(n=f,l=c);const d=this._freq[c]>>_._betaShift;this._freq[c]-=d,this._bias[c]+=d<<_._gammaShift}return this._freq[o]+=_._beta,this._bias[o]-=_._betaGamma,l}}exports.NeuQuant=_,_._prime1=499,_._prime2=491,_._prime3=487,_._prime4=503,_._minpicturebytes=_._prime4,_._nCycles=100,_._initialBiasShift=16,_._initialBias=1<<_._initialBiasShift,_._gammaShift=10,_._betaShift=10,_._beta=_._initialBias>>_._betaShift,_._betaGamma=_._initialBias<<_._gammaShift-_._betaShift,_._radiusBiasShift=6,_._radiusBias=1<<_._radiusBiasShift,_._radiusDecrease=30,_._alphaBiasShift=10,_._initAlpha=1<<_._alphaBiasShift,_._radBiasShift=8,_._radBias=1<<_._radBiasShift,_._alphaRadBiasShift=_._alphaBiasShift+_._radBiasShift,_._alphaRadBias=1<<_._alphaRadBiasShift;
},{"../../utils/palette":"KCSi","../../utils/point":"AzZH","../paletteQuantizer":"gm7f","../../utils":"MRhM"}],"fT9P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NeuQuantFloat=void 0;var t=require("../../utils/palette"),i=require("../../utils/point"),e=require("../paletteQuantizer"),s=require("../../utils");const a=3;class r{constructor(t){this.r=this.g=this.b=this.a=t}toPoint(){return i.Point.createByRGBA(this.r>>a,this.g>>a,this.b>>a,this.a>>a)}subtract(t,i,e,s){this.r-=t,this.g-=i,this.b-=e,this.a-=s}}class _ extends e.AbstractPaletteQuantizer{constructor(t,i=256){super(),this._distance=t,this._pointArray=[],this._sampleFactor=1,this._networkSize=i,this._distance.setWhitePoint(255<<a,255<<a,255<<a,255<<a)}sample(t){this._pointArray=this._pointArray.concat(t.getPointArray())}*quantize(){this._init(),yield*this._learn(),yield{palette:this._buildPalette(),progress:100}}_init(){this._freq=[],this._bias=[],this._radPower=[],this._network=[];for(let t=0;t<this._networkSize;t++)this._network[t]=new r((t<<a+8)/this._networkSize),this._freq[t]=_._initialBias/this._networkSize,this._bias[t]=0}*_learn(){let t=this._sampleFactor;const i=this._pointArray.length;i<_._minpicturebytes&&(t=1);const e=30+(t-1)/3,r=i/t;let h,n=r/_._nCycles|0,o=_._initAlpha,l=(this._networkSize>>3)*_._radiusBias,c=l>>_._radiusBiasShift;c<=1&&(c=0);for(let s=0;s<c;s++)this._radPower[s]=o*((c*c-s*s)*_._radBias/(c*c));h=i<_._minpicturebytes?1:i%_._prime1!=0?_._prime1:i%_._prime2!=0?_._prime2:i%_._prime3!=0?_._prime3:_._prime4;const p=new s.ProgressTracker(r,99);for(let s=0,u=0;s<r;){p.shouldNotify(s)&&(yield{progress:p.progress});const t=this._pointArray[u],r=t.b<<a,f=t.g<<a,d=t.r<<a,b=t.a<<a,S=this._contest(r,f,d,b);if(this._alterSingle(o,S,r,f,d,b),0!==c&&this._alterNeighbour(c,S,r,f,d,b),(u+=h)>=i&&(u-=i),0===n&&(n=1),++s%n==0){o-=o/e,(c=(l-=l/_._radiusDecrease)>>_._radiusBiasShift)<=1&&(c=0);for(let t=0;t<c;t++)this._radPower[t]=o*((c*c-t*t)*_._radBias/(c*c))}}}_buildPalette(){const i=new t.Palette;return this._network.forEach(t=>{i.add(t.toPoint())}),i.sort(),i}_alterNeighbour(t,i,e,s,a,r){let h=i-t;h<-1&&(h=-1);let n=i+t;n>this._networkSize&&(n=this._networkSize);let o=i+1,l=i-1,c=1;for(;o<n||l>h;){const t=this._radPower[c++]/_._alphaRadBias;if(o<n){const i=this._network[o++];i.subtract(t*(i.r-a),t*(i.g-s),t*(i.b-e),t*(i.a-r))}if(l>h){const i=this._network[l--];i.subtract(t*(i.r-a),t*(i.g-s),t*(i.b-e),t*(i.a-r))}}}_alterSingle(t,i,e,s,a,r){t/=_._initAlpha;const h=this._network[i];h.subtract(t*(h.r-a),t*(h.g-s),t*(h.b-e),t*(h.a-r))}_contest(t,i,e,s){const r=1020<<a;let h=~(1<<31),n=h,o=-1,l=o;for(let c=0;c<this._networkSize;c++){const p=this._network[c],u=this._distance.calculateNormalized(p,{r:e,g:i,b:t,a:s})*r;u<h&&(h=u,o=c);const f=u-(this._bias[c]>>_._initialBiasShift-a);f<n&&(n=f,l=c);const d=this._freq[c]>>_._betaShift;this._freq[c]-=d,this._bias[c]+=d<<_._gammaShift}return this._freq[o]+=_._beta,this._bias[o]-=_._betaGamma,l}}exports.NeuQuantFloat=_,_._prime1=499,_._prime2=491,_._prime3=487,_._prime4=503,_._minpicturebytes=_._prime4,_._nCycles=100,_._initialBiasShift=16,_._initialBias=1<<_._initialBiasShift,_._gammaShift=10,_._betaShift=10,_._beta=_._initialBias>>_._betaShift,_._betaGamma=_._initialBias<<_._gammaShift-_._betaShift,_._radiusBiasShift=6,_._radiusBias=1<<_._radiusBiasShift,_._radiusDecrease=30,_._alphaBiasShift=10,_._initAlpha=1<<_._alphaBiasShift,_._radBiasShift=8,_._radBias=1<<_._radBiasShift,_._alphaRadBiasShift=_._alphaBiasShift+_._radBiasShift,_._alphaRadBias=1<<_._alphaRadBiasShift;
},{"../../utils/palette":"KCSi","../../utils/point":"AzZH","../paletteQuantizer":"gm7f","../../utils":"MRhM"}],"OrD7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ColorHistogram=void 0;var t=require("../../utils/hueStatistics"),s=require("../../utils/arithmetic");class e{constructor(s,o){this._method=s,this._minHueCols=o<<2,this._initColors=o<<2,this._hueStats=new t.HueStatistics(e._hueGroups,this._minHueCols),this._histogram=Object.create(null)}sample(t){switch(this._method){case 1:this._colorStats1D(t);break;case 2:this._colorStats2D(t)}}getImportanceSortedColorsIDXI32(){const t=(0,s.stableSort)(Object.keys(this._histogram),(t,s)=>this._histogram[s]-this._histogram[t]);if(0===t.length)return[];let e;switch(this._method){case 1:const s=Math.min(t.length,this._initColors),o=t[s-1],i=this._histogram[o];e=t.slice(0,s);let r=s;const h=t.length;for(;r<h&&this._histogram[t[r]]===i;)e.push(t[r++]);this._hueStats.injectIntoArray(e);break;case 2:e=t;break;default:throw new Error("Incorrect method")}return e.map(function(t){return+t})}_colorStats1D(t){const s=this._histogram,e=t.getPointArray(),o=e.length;for(let i=0;i<o;i++){const t=e[i].uint32;this._hueStats.check(t),t in s?s[t]++:s[t]=1}}_colorStats2D(t){const s=t.getWidth(),o=t.getHeight(),i=t.getPointArray(),r=e._boxSize[0],h=e._boxSize[1],a=r*h,c=this._makeBoxes(s,o,r,h),n=this._histogram;c.forEach(t=>{let o=Math.round(t.w*t.h/a)*e._boxPixels;o<2&&(o=2);const r={};this._iterateBox(t,s,t=>{const s=i[t].uint32;this._hueStats.check(s),s in n?n[s]++:s in r?++r[s]>=o&&(n[s]=r[s]):r[s]=1})}),this._hueStats.injectIntoDictionary(n)}_iterateBox(t,s,e){const o=t,i=o.y*s+o.x,r=(o.y+o.h-1)*s+(o.x+o.w-1),h=s-o.w+1;let a=0,c=i;do{e.call(this,c),c+=++a%o.w==0?h:1}while(c<=r)}_makeBoxes(t,s,e,o){const i=t%e,r=s%o,h=t-i,a=s-r,c=[];for(let n=0;n<s;n+=o)for(let s=0;s<t;s+=e)c.push({x:s,y:n,w:s===h?i:e,h:n===a?r:o});return c}}exports.ColorHistogram=e,e._boxSize=[64,64],e._boxPixels=2,e._hueGroups=10;
},{"../../utils/hueStatistics":"sduU","../../utils/arithmetic":"b3mL"}],"vmhr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.RGBQuant=void 0;var t=require("../../utils/palette"),e=require("../../utils/point"),i=require("./colorHistogram"),s=require("../paletteQuantizer"),r=require("../../utils/arithmetic"),o=require("../../utils");class n{constructor(t,e,i){this.index=t,this.color=e,this.distance=i}}class l extends s.AbstractPaletteQuantizer{constructor(t,e=256,s=2){super(),this._distance=t,this._colors=e,this._histogram=new i.ColorHistogram(s,e),this._initialDistance=.01,this._distanceIncrement=.005}sample(t){this._histogram.sample(t)}*quantize(){const t=this._histogram.getImportanceSortedColorsIDXI32();if(0===t.length)throw new Error("No colors in image");yield*this._buildPalette(t)}*_buildPalette(i){const s=new t.Palette,l=s.getPointContainer().getPointArray(),a=new Array(i.length);for(let t=0;t<i.length;t++)l.push(e.Point.createByUint32(i[t])),a[t]=1;const c=l.length,h=[];let u=c,d=this._initialDistance;const g=new o.ProgressTracker(u-this._colors,99);for(;u>this._colors;){h.length=0;for(let t=0;t<c;t++){if(g.shouldNotify(c-u)&&(yield{progress:g.progress}),0===a[t])continue;const e=l[t];for(let i=t+1;i<c;i++){if(0===a[i])continue;const t=l[i],s=this._distance.calculateNormalized(e,t);s<d&&(h.push(new n(i,t,s)),a[i]=0,u--)}}d+=u>3*this._colors?this._initialDistance:this._distanceIncrement}if(u<this._colors){(0,r.stableSort)(h,function(t,e){return e.distance-t.distance});let t=0;for(;u<this._colors&&t<h.length;){a[h[t].index]=1,u++,t++}}let _=l.length;for(let t=_-1;t>=0;t--)0===a[t]&&(t!==_-1&&(l[t]=l[_-1]),--_);l.length=_,s.sort(),yield{palette:s,progress:100}}}exports.RGBQuant=l;
},{"../../utils/palette":"KCSi","../../utils/point":"AzZH","./colorHistogram":"OrD7","../paletteQuantizer":"gm7f","../../utils/arithmetic":"b3mL","../../utils":"MRhM"}],"YOKj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WuQuant=exports.WuColorCube=void 0;var i=require("../../utils/palette"),e=require("../../utils/point"),m=require("../paletteQuantizer"),u=require("../../utils");function a(i){const e=[];for(let m=0;m<i;m++)e[m]=0;return e}function s(i,e,m,u){const a=new Array(i);for(let s=0;s<i;s++){a[s]=new Array(e);for(let i=0;i<e;i++){a[s][i]=new Array(m);for(let e=0;e<m;e++){a[s][i][e]=new Array(u);for(let m=0;m<u;m++)a[s][i][e][m]=0}}}return a}function n(i,e,m){const u=new Array(i);for(let a=0;a<i;a++){u[a]=new Array(e);for(let i=0;i<e;i++){u[a][i]=new Array(m);for(let e=0;e<m;e++)u[a][i][e]=0}}return u}function t(i,e,m,u,a){for(let s=0;s<e;s++){i[s]=[];for(let e=0;e<m;e++){i[s][e]=[];for(let m=0;m<u;m++)i[s][e][m]=a}}}function M(i,e,m){for(let u=0;u<e;u++)i[u]=m}class l{}exports.WuColorCube=l;class r extends m.AbstractPaletteQuantizer{constructor(i,e=256,m=5){super(),this._distance=i,this._setQuality(m),this._initialize(e)}sample(i){const e=i.getPointArray();for(let m=0,u=e.length;m<u;m++)this._addColor(e[m]);this._pixels=this._pixels.concat(e)}*quantize(){yield*this._preparePalette();const m=new i.Palette;for(let i=0;i<this._colors;i++)if(this._sums[i]>0){const u=this._sums[i],a=this._reds[i]/u,s=this._greens[i]/u,n=this._blues[i]/u,t=this._alphas[i]/u,M=e.Point.createByRGBA(0|a,0|s,0|n,0|t);m.add(M)}m.sort(),yield{palette:m,progress:100}}*_preparePalette(){yield*this._calculateMoments();let i=0;const e=a(this._colors);for(let a=1;a<this._colors;++a){this._cut(this._cubes[i],this._cubes[a])?(e[i]=this._cubes[i].volume>1?this._calculateVariance(this._cubes[i]):0,e[a]=this._cubes[a].volume>1?this._calculateVariance(this._cubes[a]):0):(e[i]=0,a--),i=0;let m=e[0];for(let u=1;u<=a;++u)e[u]>m&&(m=e[u],i=u);if(m<=0){this._colors=a+1;break}}const m=[],u=[],s=[],n=[];for(let a=0;a<this._colors;++a){const i=r._volume(this._cubes[a],this._weights);i>0?(m[a]=r._volume(this._cubes[a],this._momentsRed)/i|0,u[a]=r._volume(this._cubes[a],this._momentsGreen)/i|0,s[a]=r._volume(this._cubes[a],this._momentsBlue)/i|0,n[a]=r._volume(this._cubes[a],this._momentsAlpha)/i|0):(m[a]=0,u[a]=0,s[a]=0,n[a]=0)}this._reds=a(this._colors+1),this._greens=a(this._colors+1),this._blues=a(this._colors+1),this._alphas=a(this._colors+1),this._sums=a(this._colors+1);for(let a=0,t=this._pixels.length;a<t;a++){const i=this._pixels[a];let e=-1,t=Number.MAX_VALUE;for(let a=0;a<this._colors;a++){const M=m[a],l=u[a],r=s[a],h=n[a],_=this._distance.calculateRaw(M,l,r,h,i.r,i.g,i.b,i.a);_<t&&(t=_,e=a)}this._reds[e]+=i.r,this._greens[e]+=i.g,this._blues[e]+=i.b,this._alphas[e]+=i.a,this._sums[e]++}}_addColor(i){const e=8-this._significantBitsPerChannel,m=1+(i.r>>e),u=1+(i.g>>e),a=1+(i.b>>e),s=1+(i.a>>e);this._weights[s][m][u][a]++,this._momentsRed[s][m][u][a]+=i.r,this._momentsGreen[s][m][u][a]+=i.g,this._momentsBlue[s][m][u][a]+=i.b,this._momentsAlpha[s][m][u][a]+=i.a,this._moments[s][m][u][a]+=this._table[i.r]+this._table[i.g]+this._table[i.b]+this._table[i.a]}*_calculateMoments(){const i=[],e=[],m=[],a=[],s=[],l=[],r=n(this._sideSize,this._sideSize,this._sideSize),h=n(this._sideSize,this._sideSize,this._sideSize),_=n(this._sideSize,this._sideSize,this._sideSize),d=n(this._sideSize,this._sideSize,this._sideSize),x=n(this._sideSize,this._sideSize,this._sideSize),o=n(this._sideSize,this._sideSize,this._sideSize);let p=0;const b=new u.ProgressTracker(this._alphaMaxSideIndex*this._maxSideIndex,99);for(let u=1;u<=this._alphaMaxSideIndex;++u){t(r,this._sideSize,this._sideSize,this._sideSize,0),t(h,this._sideSize,this._sideSize,this._sideSize,0),t(_,this._sideSize,this._sideSize,this._sideSize,0),t(d,this._sideSize,this._sideSize,this._sideSize,0),t(x,this._sideSize,this._sideSize,this._sideSize,0),t(o,this._sideSize,this._sideSize,this._sideSize,0);for(let n=1;n<=this._maxSideIndex;++n,++p){b.shouldNotify(p)&&(yield{progress:b.progress}),M(i,this._sideSize,0),M(e,this._sideSize,0),M(m,this._sideSize,0),M(a,this._sideSize,0),M(s,this._sideSize,0),M(l,this._sideSize,0);for(let t=1;t<=this._maxSideIndex;++t){let M=0,p=0,b=0,g=0,c=0,S=0;for(let z=1;z<=this._maxSideIndex;++z)M+=this._weights[u][n][t][z],p+=this._momentsRed[u][n][t][z],b+=this._momentsGreen[u][n][t][z],g+=this._momentsBlue[u][n][t][z],c+=this._momentsAlpha[u][n][t][z],S+=this._moments[u][n][t][z],i[z]+=M,e[z]+=p,m[z]+=b,a[z]+=g,s[z]+=c,l[z]+=S,r[n][t][z]=r[n-1][t][z]+i[z],h[n][t][z]=h[n-1][t][z]+e[z],_[n][t][z]=_[n-1][t][z]+m[z],d[n][t][z]=d[n-1][t][z]+a[z],x[n][t][z]=x[n-1][t][z]+s[z],o[n][t][z]=o[n-1][t][z]+l[z],this._weights[u][n][t][z]=this._weights[u-1][n][t][z]+r[n][t][z],this._momentsRed[u][n][t][z]=this._momentsRed[u-1][n][t][z]+h[n][t][z],this._momentsGreen[u][n][t][z]=this._momentsGreen[u-1][n][t][z]+_[n][t][z],this._momentsBlue[u][n][t][z]=this._momentsBlue[u-1][n][t][z]+d[n][t][z],this._momentsAlpha[u][n][t][z]=this._momentsAlpha[u-1][n][t][z]+x[n][t][z],this._moments[u][n][t][z]=this._moments[u-1][n][t][z]+o[n][t][z]}}}}static _volumeFloat(i,e){return e[i.alphaMaximum][i.redMaximum][i.greenMaximum][i.blueMaximum]-e[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMaximum]-e[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMaximum]+e[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMaximum]-e[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMaximum]+e[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMaximum]+e[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMaximum]-e[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMaximum]-(e[i.alphaMaximum][i.redMaximum][i.greenMaximum][i.blueMinimum]-e[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMinimum]-e[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMinimum]+e[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMinimum]-e[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMinimum]+e[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMinimum]+e[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMinimum]-e[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum])}static _volume(i,e){return 0|r._volumeFloat(i,e)}static _top(i,e,m,u){let a;switch(e){case r._alpha:a=u[m][i.redMaximum][i.greenMaximum][i.blueMaximum]-u[m][i.redMaximum][i.greenMinimum][i.blueMaximum]-u[m][i.redMinimum][i.greenMaximum][i.blueMaximum]+u[m][i.redMinimum][i.greenMinimum][i.blueMaximum]-(u[m][i.redMaximum][i.greenMaximum][i.blueMinimum]-u[m][i.redMaximum][i.greenMinimum][i.blueMinimum]-u[m][i.redMinimum][i.greenMaximum][i.blueMinimum]+u[m][i.redMinimum][i.greenMinimum][i.blueMinimum]);break;case r._red:a=u[i.alphaMaximum][m][i.greenMaximum][i.blueMaximum]-u[i.alphaMaximum][m][i.greenMinimum][i.blueMaximum]-u[i.alphaMinimum][m][i.greenMaximum][i.blueMaximum]+u[i.alphaMinimum][m][i.greenMinimum][i.blueMaximum]-(u[i.alphaMaximum][m][i.greenMaximum][i.blueMinimum]-u[i.alphaMaximum][m][i.greenMinimum][i.blueMinimum]-u[i.alphaMinimum][m][i.greenMaximum][i.blueMinimum]+u[i.alphaMinimum][m][i.greenMinimum][i.blueMinimum]);break;case r._green:a=u[i.alphaMaximum][i.redMaximum][m][i.blueMaximum]-u[i.alphaMaximum][i.redMinimum][m][i.blueMaximum]-u[i.alphaMinimum][i.redMaximum][m][i.blueMaximum]+u[i.alphaMinimum][i.redMinimum][m][i.blueMaximum]-(u[i.alphaMaximum][i.redMaximum][m][i.blueMinimum]-u[i.alphaMaximum][i.redMinimum][m][i.blueMinimum]-u[i.alphaMinimum][i.redMaximum][m][i.blueMinimum]+u[i.alphaMinimum][i.redMinimum][m][i.blueMinimum]);break;case r._blue:a=u[i.alphaMaximum][i.redMaximum][i.greenMaximum][m]-u[i.alphaMaximum][i.redMaximum][i.greenMinimum][m]-u[i.alphaMaximum][i.redMinimum][i.greenMaximum][m]+u[i.alphaMaximum][i.redMinimum][i.greenMinimum][m]-(u[i.alphaMinimum][i.redMaximum][i.greenMaximum][m]-u[i.alphaMinimum][i.redMaximum][i.greenMinimum][m]-u[i.alphaMinimum][i.redMinimum][i.greenMaximum][m]+u[i.alphaMinimum][i.redMinimum][i.greenMinimum][m]);break;default:throw new Error("impossible")}return 0|a}static _bottom(i,e,m){switch(e){case r._alpha:return-m[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMaximum]+m[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMaximum]+m[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMaximum]-m[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMaximum]-(-m[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMinimum]+m[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMinimum]+m[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMinimum]-m[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum]);case r._red:return-m[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMaximum]+m[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMaximum]+m[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMaximum]-m[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMaximum]-(-m[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMinimum]+m[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMinimum]+m[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMinimum]-m[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum]);case r._green:return-m[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMaximum]+m[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMaximum]+m[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMaximum]-m[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMaximum]-(-m[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMinimum]+m[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMinimum]+m[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMinimum]-m[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum]);case r._blue:return-m[i.alphaMaximum][i.redMaximum][i.greenMaximum][i.blueMinimum]+m[i.alphaMaximum][i.redMaximum][i.greenMinimum][i.blueMinimum]+m[i.alphaMaximum][i.redMinimum][i.greenMaximum][i.blueMinimum]-m[i.alphaMaximum][i.redMinimum][i.greenMinimum][i.blueMinimum]-(-m[i.alphaMinimum][i.redMaximum][i.greenMaximum][i.blueMinimum]+m[i.alphaMinimum][i.redMaximum][i.greenMinimum][i.blueMinimum]+m[i.alphaMinimum][i.redMinimum][i.greenMaximum][i.blueMinimum]-m[i.alphaMinimum][i.redMinimum][i.greenMinimum][i.blueMinimum]);default:return 0}}_calculateVariance(i){const e=r._volume(i,this._momentsRed),m=r._volume(i,this._momentsGreen),u=r._volume(i,this._momentsBlue),a=r._volume(i,this._momentsAlpha);return r._volumeFloat(i,this._moments)-(e*e+m*m+u*u+a*a)/r._volume(i,this._weights)}_maximize(i,e,m,u,a,s,n,t,M){const l=0|r._bottom(i,e,this._momentsRed),h=0|r._bottom(i,e,this._momentsGreen),_=0|r._bottom(i,e,this._momentsBlue),d=0|r._bottom(i,e,this._momentsAlpha),x=0|r._bottom(i,e,this._weights);let o=0,p=-1;for(let b=m;b<u;++b){let m=l+r._top(i,e,b,this._momentsRed),u=h+r._top(i,e,b,this._momentsGreen),g=_+r._top(i,e,b,this._momentsBlue),c=d+r._top(i,e,b,this._momentsAlpha),S=x+r._top(i,e,b,this._weights);if(0!==S){let i=m*m+u*u+g*g+c*c,e=i/S;m=a-m,u=s-u,g=n-g,c=t-c,0!==(S=M-S)&&(e+=(i=m*m+u*u+g*g+c*c)/S)>o&&(o=e,p=b)}}return{max:o,position:p}}_cut(i,e){let m;const u=r._volume(i,this._momentsRed),a=r._volume(i,this._momentsGreen),s=r._volume(i,this._momentsBlue),n=r._volume(i,this._momentsAlpha),t=r._volume(i,this._weights),M=this._maximize(i,r._red,i.redMinimum+1,i.redMaximum,u,a,s,n,t),l=this._maximize(i,r._green,i.greenMinimum+1,i.greenMaximum,u,a,s,n,t),h=this._maximize(i,r._blue,i.blueMinimum+1,i.blueMaximum,u,a,s,n,t),_=this._maximize(i,r._alpha,i.alphaMinimum+1,i.alphaMaximum,u,a,s,n,t);if(_.max>=M.max&&_.max>=l.max&&_.max>=h.max){if(m=r._alpha,_.position<0)return!1}else m=M.max>=_.max&&M.max>=l.max&&M.max>=h.max?r._red:l.max>=_.max&&l.max>=M.max&&l.max>=h.max?r._green:r._blue;switch(e.redMaximum=i.redMaximum,e.greenMaximum=i.greenMaximum,e.blueMaximum=i.blueMaximum,e.alphaMaximum=i.alphaMaximum,m){case r._red:e.redMinimum=i.redMaximum=M.position,e.greenMinimum=i.greenMinimum,e.blueMinimum=i.blueMinimum,e.alphaMinimum=i.alphaMinimum;break;case r._green:e.greenMinimum=i.greenMaximum=l.position,e.redMinimum=i.redMinimum,e.blueMinimum=i.blueMinimum,e.alphaMinimum=i.alphaMinimum;break;case r._blue:e.blueMinimum=i.blueMaximum=h.position,e.redMinimum=i.redMinimum,e.greenMinimum=i.greenMinimum,e.alphaMinimum=i.alphaMinimum;break;case r._alpha:e.alphaMinimum=i.alphaMaximum=_.position,e.blueMinimum=i.blueMinimum,e.redMinimum=i.redMinimum,e.greenMinimum=i.greenMinimum}return i.volume=(i.redMaximum-i.redMinimum)*(i.greenMaximum-i.greenMinimum)*(i.blueMaximum-i.blueMinimum)*(i.alphaMaximum-i.alphaMinimum),e.volume=(e.redMaximum-e.redMinimum)*(e.greenMaximum-e.greenMinimum)*(e.blueMaximum-e.blueMinimum)*(e.alphaMaximum-e.alphaMinimum),!0}_initialize(i){this._colors=i,this._cubes=[];for(let e=0;e<i;e++)this._cubes[e]=new l;this._cubes[0].redMinimum=0,this._cubes[0].greenMinimum=0,this._cubes[0].blueMinimum=0,this._cubes[0].alphaMinimum=0,this._cubes[0].redMaximum=this._maxSideIndex,this._cubes[0].greenMaximum=this._maxSideIndex,this._cubes[0].blueMaximum=this._maxSideIndex,this._cubes[0].alphaMaximum=this._alphaMaxSideIndex,this._weights=s(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsRed=s(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsGreen=s(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsBlue=s(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._momentsAlpha=s(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._moments=s(this._alphaSideSize,this._sideSize,this._sideSize,this._sideSize),this._table=[];for(let e=0;e<256;++e)this._table[e]=e*e;this._pixels=[]}_setQuality(i=5){this._significantBitsPerChannel=i,this._maxSideIndex=1<<this._significantBitsPerChannel,this._alphaMaxSideIndex=this._maxSideIndex,this._sideSize=this._maxSideIndex+1,this._alphaSideSize=this._alphaMaxSideIndex+1}}exports.WuQuant=r,r._alpha=3,r._red=2,r._green=1,r._blue=0;
},{"../../utils/palette":"KCSi","../../utils/point":"AzZH","../paletteQuantizer":"gm7f","../../utils":"MRhM"}],"usjm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AbstractPaletteQuantizer",{enumerable:!0,get:function(){return e.AbstractPaletteQuantizer}}),Object.defineProperty(exports,"NeuQuant",{enumerable:!0,get:function(){return t.NeuQuant}}),Object.defineProperty(exports,"NeuQuantFloat",{enumerable:!0,get:function(){return r.NeuQuantFloat}}),Object.defineProperty(exports,"RGBQuant",{enumerable:!0,get:function(){return u.RGBQuant}}),Object.defineProperty(exports,"ColorHistogram",{enumerable:!0,get:function(){return n.ColorHistogram}}),Object.defineProperty(exports,"WuQuant",{enumerable:!0,get:function(){return o.WuQuant}}),Object.defineProperty(exports,"WuColorCube",{enumerable:!0,get:function(){return o.WuColorCube}});var e=require("./paletteQuantizer"),t=require("./neuquant/neuquant"),r=require("./neuquant/neuquantFloat"),u=require("./rgbquant/rgbquant"),n=require("./rgbquant/colorHistogram"),o=require("./wu/wuQuant");
},{"./paletteQuantizer":"gm7f","./neuquant/neuquant":"TSYH","./neuquant/neuquantFloat":"fT9P","./rgbquant/rgbquant":"vmhr","./rgbquant/colorHistogram":"OrD7","./wu/wuQuant":"YOKj"}],"pUS7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AbstractImageQuantizer=void 0;class e{quantizeSync(e,t){for(const r of this.quantize(e,t))if(r.pointContainer)return r.pointContainer;throw new Error("unreachable")}}exports.AbstractImageQuantizer=e;
},{}],"cReF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NearestColor=void 0;var e=require("./imageQuantizer"),r=require("../utils/progressTracker");class t extends e.AbstractImageQuantizer{constructor(e){super(),this._distance=e}*quantize(e,t){const s=e.getPointArray(),o=e.getWidth(),i=e.getHeight(),a=new r.ProgressTracker(i,99);for(let r=0;r<i;r++){a.shouldNotify(r)&&(yield{progress:a.progress});for(let e=0,i=r*o;e<o;e++,i++){const e=s[i];e.from(t.getNearestColor(this._distance,e))}}yield{pointContainer:e,progress:100}}}exports.NearestColor=t;
},{"./imageQuantizer":"pUS7","../utils/progressTracker":"ywMQ"}],"KQk7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ErrorDiffusionArray=exports.ErrorDiffusionArrayKernel=void 0;var e,r=require("./imageQuantizer"),t=require("../utils/point"),i=require("../utils/arithmetic"),s=require("../utils/progressTracker");exports.ErrorDiffusionArrayKernel=e,function(e){e[e.FloydSteinberg=0]="FloydSteinberg",e[e.FalseFloydSteinberg=1]="FalseFloydSteinberg",e[e.Stucki=2]="Stucki",e[e.Atkinson=3]="Atkinson",e[e.Jarvis=4]="Jarvis",e[e.Burkes=5]="Burkes",e[e.Sierra=6]="Sierra",e[e.TwoSierra=7]="TwoSierra",e[e.SierraLite=8]="SierraLite"}(e||(exports.ErrorDiffusionArrayKernel=e={}));class n extends r.AbstractImageQuantizer{constructor(e,r,t=!0,i=0,s=!1){super(),this._setKernel(r),this._distance=e,this._minColorDistance=i,this._serpentine=t,this._calculateErrorLikeGIMP=s}*quantize(e,r){const n=e.getPointArray(),o=new t.Point,a=e.getWidth(),l=e.getHeight(),c=[];let h=1,u=1;for(const t of this._kernel){const e=t[2]+1;u<e&&(u=e)}for(let t=0;t<u;t++)this._fillErrorLine(c[t]=[],a);const k=new s.ProgressTracker(l,99);for(let s=0;s<l;s++){k.shouldNotify(s)&&(yield{progress:k.progress}),this._serpentine&&(h*=-1);const e=s*a,u=1===h?0:a-1,f=1===h?a:-1;this._fillErrorLine(c[0],a),c.push(c.shift());const g=c[0];for(let k=u,_=e+u;k!==f;k+=h,_+=h){const e=n[_],u=g[k];o.from(e);const f=t.Point.createByRGBA((0,i.inRange0to255Rounded)(e.r+u[0]),(0,i.inRange0to255Rounded)(e.g+u[1]),(0,i.inRange0to255Rounded)(e.b+u[2]),(0,i.inRange0to255Rounded)(e.a+u[3])),d=r.getNearestColor(this._distance,f);if(e.from(d),this._minColorDistance){if(this._distance.calculateNormalized(e,d)<this._minColorDistance)continue}let b,y,S,p;this._calculateErrorLikeGIMP?(b=f.r-d.r,y=f.g-d.g,S=f.b-d.b,p=f.a-d.a):(b=o.r-d.r,y=o.g-d.g,S=o.b-d.b,p=o.a-d.a);const A=1===h?0:this._kernel.length-1,E=1===h?this._kernel.length:-1;for(let r=A;r!==E;r+=h){const e=this._kernel[r][1]*h,t=this._kernel[r][2];if(e+k>=0&&e+k<a&&t+s>=0&&t+s<l){const i=this._kernel[r][0],s=c[t][e+k];s[0]=s[0]+b*i,s[1]=s[1]+y*i,s[2]=s[2]+S*i,s[3]=s[3]+p*i}}}}yield{pointContainer:e,progress:100}}_fillErrorLine(e,r){e.length>r&&(e.length=r);const t=e.length;for(let i=0;i<t;i++){const r=e[i];r[0]=r[1]=r[2]=r[3]=0}for(let i=t;i<r;i++)e[i]=[0,0,0,0]}_setKernel(r){switch(r){case e.FloydSteinberg:this._kernel=[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]];break;case e.FalseFloydSteinberg:this._kernel=[[3/8,1,0],[3/8,0,1],[.25,1,1]];break;case e.Stucki:this._kernel=[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]];break;case e.Atkinson:this._kernel=[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]];break;case e.Jarvis:this._kernel=[[7/48,1,0],[5/48,2,0],[3/48,-2,1],[5/48,-1,1],[7/48,0,1],[5/48,1,1],[3/48,2,1],[1/48,-2,2],[3/48,-1,2],[5/48,0,2],[3/48,1,2],[1/48,2,2]];break;case e.Burkes:this._kernel=[[.25,1,0],[.125,2,0],[2/32,-2,1],[.125,-1,1],[.25,0,1],[.125,1,1],[2/32,2,1]];break;case e.Sierra:this._kernel=[[5/32,1,0],[3/32,2,0],[2/32,-2,1],[.125,-1,1],[5/32,0,1],[.125,1,1],[2/32,2,1],[2/32,-1,2],[3/32,0,2],[2/32,1,2]];break;case e.TwoSierra:this._kernel=[[.25,1,0],[3/16,2,0],[1/16,-2,1],[.125,-1,1],[3/16,0,1],[.125,1,1],[1/16,2,1]];break;case e.SierraLite:this._kernel=[[.5,1,0],[.25,-1,1],[.25,0,1]];break;default:throw new Error("ErrorDiffusionArray: unknown kernel = "+r)}}}exports.ErrorDiffusionArray=n;
},{"./imageQuantizer":"pUS7","../utils/point":"AzZH","../utils/arithmetic":"b3mL","../utils/progressTracker":"ywMQ"}],"Qgra":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hilbertCurve=l;var e,i=require("../../utils/progressTracker");function*l(l,t,c){const d=Math.max(l,t),s={width:l,height:t,level:Math.floor(Math.log(d)/Math.log(2)+1),callback:c,tracker:new i.ProgressTracker(l*t,99),index:0,x:0,y:0};yield*r(s,e.UP),a(s,e.NONE)}function*r(i,l){if(!(i.level<1)){switch(i.tracker.shouldNotify(i.index)&&(yield{progress:i.tracker.progress}),i.level--,l){case e.LEFT:yield*r(i,e.UP),a(i,e.RIGHT),yield*r(i,e.LEFT),a(i,e.DOWN),yield*r(i,e.LEFT),a(i,e.LEFT),yield*r(i,e.DOWN);break;case e.RIGHT:yield*r(i,e.DOWN),a(i,e.LEFT),yield*r(i,e.RIGHT),a(i,e.UP),yield*r(i,e.RIGHT),a(i,e.RIGHT),yield*r(i,e.UP);break;case e.UP:yield*r(i,e.LEFT),a(i,e.DOWN),yield*r(i,e.UP),a(i,e.RIGHT),yield*r(i,e.UP),a(i,e.UP),yield*r(i,e.RIGHT);break;case e.DOWN:yield*r(i,e.RIGHT),a(i,e.UP),yield*r(i,e.DOWN),a(i,e.LEFT),yield*r(i,e.DOWN),a(i,e.DOWN),yield*r(i,e.LEFT)}i.level++}}function a(i,l){switch(i.x>=0&&i.x<i.width&&i.y>=0&&i.y<i.height&&(i.callback(i.x,i.y),i.index++),l){case e.LEFT:i.x--;break;case e.RIGHT:i.x++;break;case e.UP:i.y--;break;case e.DOWN:i.y++}}!function(e){e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT",e[e.DOWN=4]="DOWN"}(e||(e={}));
},{"../../utils/progressTracker":"ywMQ"}],"XWAF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ErrorDiffusionRiemersma=void 0;var e=require("./imageQuantizer"),r=require("./spaceFillingCurves/hilbertCurve"),t=require("../utils/point"),i=require("../utils/arithmetic");class s extends e.AbstractImageQuantizer{constructor(e,r=16,t=1){super(),this._distance=e,this._errorQueueSize=r,this._weights=s._createWeights(t,r)}*quantize(e,s){const o=e.getPointArray(),u=e.getWidth(),n=e.getHeight(),a=[];let g=0;for(let r=0;r<this._errorQueueSize;r++)a[r]={r:0,g:0,b:0,a:0};yield*(0,r.hilbertCurve)(u,n,(e,r)=>{const n=o[e+r*u];let h=n.r,c=n.g,l=n.b,d=n.a;for(let t=0;t<this._errorQueueSize;t++){const e=this._weights[t],r=a[(t+g)%this._errorQueueSize];h+=r.r*e,c+=r.g*e,l+=r.b*e,d+=r.a*e}const _=t.Point.createByRGBA((0,i.inRange0to255Rounded)(h),(0,i.inRange0to255Rounded)(c),(0,i.inRange0to255Rounded)(l),(0,i.inRange0to255Rounded)(d)),R=s.getNearestColor(this._distance,_),b=((g=(g+1)%this._errorQueueSize)+this._errorQueueSize-1)%this._errorQueueSize;a[b].r=n.r-R.r,a[b].g=n.g-R.g,a[b].b=n.b-R.b,a[b].a=n.a-R.a,n.from(R)}),yield{pointContainer:e,progress:100}}static _createWeights(e,r){const t=[],i=Math.exp(Math.log(r)/(r-1));for(let s=0,o=1;s<r;s++)t[s]=(o+.5|0)/r*e,o*=i;return t}}exports.ErrorDiffusionRiemersma=s;
},{"./imageQuantizer":"pUS7","./spaceFillingCurves/hilbertCurve":"Qgra","../utils/point":"AzZH","../utils/arithmetic":"b3mL"}],"d99G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AbstractImageQuantizer",{enumerable:!0,get:function(){return e.AbstractImageQuantizer}}),Object.defineProperty(exports,"NearestColor",{enumerable:!0,get:function(){return r.NearestColor}}),Object.defineProperty(exports,"ErrorDiffusionArray",{enumerable:!0,get:function(){return t.ErrorDiffusionArray}}),Object.defineProperty(exports,"ErrorDiffusionArrayKernel",{enumerable:!0,get:function(){return t.ErrorDiffusionArrayKernel}}),Object.defineProperty(exports,"ErrorDiffusionRiemersma",{enumerable:!0,get:function(){return n.ErrorDiffusionRiemersma}});var e=require("./imageQuantizer"),r=require("./nearestColor"),t=require("./array"),n=require("./riemersma");
},{"./imageQuantizer":"pUS7","./nearestColor":"cReF","./array":"KQk7","./riemersma":"XWAF"}],"a6Uv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ssim=n;var t=require("../constants/bt709");const e=.01,o=.03;function n(t,n){if(t.getHeight()!==n.getHeight()||t.getWidth()!==n.getWidth())throw new Error("Images have different sizes!");const s=Math.pow(255*e,2),i=Math.pow(255*o,2);let h=0,c=0;return r(t,n,(t,e,o,n)=>{let r=0,g=0,f=0;for(let s=0;s<t.length;s++)g+=Math.pow(t[s]-o,2),f+=Math.pow(e[s]-n,2),r+=(t[s]-o)*(e[s]-n);const a=t.length-1;g/=a,f/=a;const l=(2*o*n+s)*(2*(r/=a)+i),u=(Math.pow(o,2)+Math.pow(n,2)+s)*(g+f+i);c+=l/u,h++}),c/h}function r(t,e,o){const n=t.getWidth(),r=t.getHeight();for(let h=0;h<r;h+=8)for(let c=0;c<n;c+=8){const g=Math.min(8,n-c),f=Math.min(8,r-h),a=s(t,c,h,g,f),l=s(e,c,h,g,f);o(a,l,i(a),i(l))}}function s(e,o,n,r,s){const i=e.getPointArray(),h=[];let c=0;for(let g=n;g<n+s;g++){const n=g*e.getWidth();for(let e=o;e<o+r;e++){const o=i[n+e];h[c]=o.r*t.Y.RED+o.g*t.Y.GREEN+o.b*t.Y.BLUE,c++}}return h}function i(t){let e=0;for(const o of t)e+=o;return e/t.length}
},{"../constants/bt709":"Spxq"}],"yZRa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ssim",{enumerable:!0,get:function(){return e.ssim}});var e=require("./ssim");
},{"./ssim":"a6Uv"}],"kql1":[function(require,module,exports) {

var e=module.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e);
},{}],"KVo1":[function(require,module,exports) {
var e=module.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e);
},{}],"SP6V":[function(require,module,exports) {
module.exports=function(o){return"object"==typeof o?null!==o:"function"==typeof o};
},{}],"DBsB":[function(require,module,exports) {
var r=require("./_is-object");module.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e};
},{"./_is-object":"SP6V"}],"e5TU":[function(require,module,exports) {
module.exports=function(r){try{return!!r()}catch(t){return!0}};
},{}],"ZJLI":[function(require,module,exports) {
module.exports=!require("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a});
},{"./_fails":"e5TU"}],"dDni":[function(require,module,exports) {
var e=require("./_is-object"),r=require("./_global").document,t=e(r)&&e(r.createElement);module.exports=function(e){return t?r.createElement(e):{}};
},{"./_is-object":"SP6V","./_global":"kql1"}],"UUWM":[function(require,module,exports) {
module.exports=!require("./_descriptors")&&!require("./_fails")(function(){return 7!=Object.defineProperty(require("./_dom-create")("div"),"a",{get:function(){return 7}}).a});
},{"./_descriptors":"ZJLI","./_fails":"e5TU","./_dom-create":"dDni"}],"PUNq":[function(require,module,exports) {
var t=require("./_is-object");module.exports=function(r,e){if(!t(r))return r;var o,n;if(e&&"function"==typeof(o=r.toString)&&!t(n=o.call(r)))return n;if("function"==typeof(o=r.valueOf)&&!t(n=o.call(r)))return n;if(!e&&"function"==typeof(o=r.toString)&&!t(n=o.call(r)))return n;throw TypeError("Can't convert object to primitive value")};
},{"./_is-object":"SP6V"}],"wvco":[function(require,module,exports) {
var e=require("./_an-object"),r=require("./_ie8-dom-define"),t=require("./_to-primitive"),i=Object.defineProperty;exports.f=require("./_descriptors")?Object.defineProperty:function(o,n,u){if(e(o),n=t(n,!0),e(u),r)try{return i(o,n,u)}catch(c){}if("get"in u||"set"in u)throw TypeError("Accessors not supported!");return"value"in u&&(o[n]=u.value),o};
},{"./_an-object":"DBsB","./_ie8-dom-define":"UUWM","./_to-primitive":"PUNq","./_descriptors":"ZJLI"}],"B9EI":[function(require,module,exports) {
module.exports=function(e,r){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:r}};
},{}],"i5RL":[function(require,module,exports) {
var r=require("./_object-dp"),e=require("./_property-desc");module.exports=require("./_descriptors")?function(t,u,o){return r.f(t,u,e(1,o))}:function(r,e,t){return r[e]=t,r};
},{"./_object-dp":"wvco","./_property-desc":"B9EI","./_descriptors":"ZJLI"}],"nW2g":[function(require,module,exports) {
var r={}.hasOwnProperty;module.exports=function(e,n){return r.call(e,n)};
},{}],"f0sk":[function(require,module,exports) {
var o=0,t=Math.random();module.exports=function(n){return"Symbol(".concat(void 0===n?"":n,")_",(++o+t).toString(36))};
},{}],"Nw1e":[function(require,module,exports) {
module.exports=!1;
},{}],"sTGr":[function(require,module,exports) {

var r=require("./_core"),e=require("./_global"),o="__core-js_shared__",i=e[o]||(e[o]={});(module.exports=function(r,e){return i[r]||(i[r]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:require("./_library")?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"});
},{"./_core":"KVo1","./_global":"kql1","./_library":"Nw1e"}],"xZwm":[function(require,module,exports) {
module.exports=require("./_shared")("native-function-to-string",Function.toString);
},{"./_shared":"sTGr"}],"l2hW":[function(require,module,exports) {

var e=require("./_global"),r=require("./_hide"),t=require("./_has"),i=require("./_uid")("src"),n=require("./_function-to-string"),o="toString",u=(""+n).split(o);require("./_core").inspectSource=function(e){return n.call(e)},(module.exports=function(n,o,c,l){var s="function"==typeof c;s&&(t(c,"name")||r(c,"name",o)),n[o]!==c&&(s&&(t(c,i)||r(c,i,n[o]?""+n[o]:u.join(String(o)))),n===e?n[o]=c:l?n[o]?n[o]=c:r(n,o,c):(delete n[o],r(n,o,c)))})(Function.prototype,o,function(){return"function"==typeof this&&this[i]||n.call(this)});
},{"./_global":"kql1","./_hide":"i5RL","./_has":"nW2g","./_uid":"f0sk","./_function-to-string":"xZwm","./_core":"KVo1"}],"L6p4":[function(require,module,exports) {
module.exports=function(o){if("function"!=typeof o)throw TypeError(o+" is not a function!");return o};
},{}],"N9ch":[function(require,module,exports) {
var r=require("./_a-function");module.exports=function(n,t,u){if(r(n),void 0===t)return n;switch(u){case 1:return function(r){return n.call(t,r)};case 2:return function(r,u){return n.call(t,r,u)};case 3:return function(r,u,e){return n.call(t,r,u,e)}}return function(){return n.apply(t,arguments)}};
},{"./_a-function":"L6p4"}],"NjVL":[function(require,module,exports) {

var e=require("./_global"),r=require("./_core"),o=require("./_hide"),i=require("./_redefine"),u=require("./_ctx"),n="prototype",t=function(c,f,l){var q,_,a,d,p=c&t.F,v=c&t.G,F=c&t.S,x=c&t.P,y=c&t.B,B=v?e:F?e[f]||(e[f]={}):(e[f]||{})[n],G=v?r:r[f]||(r[f]={}),P=G[n]||(G[n]={});for(q in v&&(l=f),l)a=((_=!p&&B&&void 0!==B[q])?B:l)[q],d=y&&_?u(a,e):x&&"function"==typeof a?u(Function.call,a):a,B&&i(B,q,a,c&t.U),G[q]!=a&&o(G,q,d),x&&P[q]!=a&&(P[q]=a)};e.core=r,t.F=1,t.G=2,t.S=4,t.P=8,t.B=16,t.W=32,t.U=64,t.R=128,module.exports=t;
},{"./_global":"kql1","./_core":"KVo1","./_hide":"i5RL","./_redefine":"l2hW","./_ctx":"N9ch"}],"TTev":[function(require,module,exports) {
module.exports=function(e,r,l){var a=void 0===l;switch(r.length){case 0:return a?e():e.call(l);case 1:return a?e(r[0]):e.call(l,r[0]);case 2:return a?e(r[0],r[1]):e.call(l,r[0],r[1]);case 3:return a?e(r[0],r[1],r[2]):e.call(l,r[0],r[1],r[2]);case 4:return a?e(r[0],r[1],r[2],r[3]):e.call(l,r[0],r[1],r[2],r[3])}return e.apply(l,r)};
},{}],"DBa9":[function(require,module,exports) {
var e=require("./_global").document;module.exports=e&&e.documentElement;
},{"./_global":"kql1"}],"viv7":[function(require,module,exports) {
var r={}.toString;module.exports=function(t){return r.call(t).slice(8,-1)};
},{}],"sbFn":[function(require,module,exports) {


var e,t,n,i=require("./_ctx"),o=require("./_invoke"),r=require("./_html"),s=require("./_dom-create"),a=require("./_global"),c=a.process,u=a.setImmediate,p=a.clearImmediate,f=a.MessageChannel,l=a.Dispatch,d=0,m={},h="onreadystatechange",g=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},v=function(e){g.call(e.data)};u&&p||(u=function(t){for(var n=[],i=1;arguments.length>i;)n.push(arguments[i++]);return m[++d]=function(){o("function"==typeof t?t:Function(t),n)},e(d),d},p=function(e){delete m[e]},"process"==require("./_cof")(c)?e=function(e){c.nextTick(i(g,e,1))}:l&&l.now?e=function(e){l.now(i(g,e,1))}:f?(n=(t=new f).port2,t.port1.onmessage=v,e=i(n.postMessage,n,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts?(e=function(e){a.postMessage(e+"","*")},a.addEventListener("message",v,!1)):e=h in s("script")?function(e){r.appendChild(s("script"))[h]=function(){r.removeChild(this),g.call(e)}}:function(e){setTimeout(i(g,e,1),0)}),module.exports={set:u,clear:p};
},{"./_ctx":"N9ch","./_invoke":"TTev","./_html":"DBa9","./_dom-create":"dDni","./_global":"kql1","./_cof":"viv7"}],"hg3C":[function(require,module,exports) {
var e=require("./_export"),r=require("./_task");e(e.G+e.B,{setImmediate:r.set,clearImmediate:r.clear});
},{"./_export":"NjVL","./_task":"sbFn"}],"lYxK":[function(require,module,exports) {
require("../modules/web.immediate"),module.exports=require("../modules/_core").setImmediate;
},{"../modules/web.immediate":"hg3C","../modules/_core":"KVo1"}],"oYDs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildPaletteSync=i,exports.buildPalette=u,exports.applyPaletteSync=s,exports.applyPalette=c;var r=o(require("core-js/fn/set-immediate")),e=o(require("./distance")),n=o(require("./image")),t=o(require("./palette"));function a(){if("function"!=typeof WeakMap)return null;var r=new WeakMap;return a=function(){return r},r}function o(r){if(r&&r.__esModule)return r;if(null===r||"object"!=typeof r&&"function"!=typeof r)return{default:r};var e=a();if(e&&e.has(r))return e.get(r);var n={},t=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)){var i=t?Object.getOwnPropertyDescriptor(r,o):null;i&&(i.get||i.set)?Object.defineProperty(n,o,i):n[o]=r[o]}return n.default=r,e&&e.set(r,n),n}function i(r,{colorDistanceFormula:e,paletteQuantization:n,colors:t}={}){const a=w(l(e),n,t);return r.forEach(r=>a.sample(r)),a.quantizeSync()}async function u(e,{colorDistanceFormula:n,paletteQuantization:t,colors:a,onProgress:o}={}){return new Promise((i,u)=>{const s=w(l(n),t,a);let c,f;e.forEach(r=>s.sample(r));const y=s.quantize(),p=()=>{try{const n=y.next();n.done?i(c):(n.value.palette&&(c=n.value.palette),o&&o(n.value.progress),f=r(p))}catch(e){clearTimeout(f),u(e)}};f=r(p)})}function s(r,e,{colorDistanceFormula:n,imageQuantization:t}={}){return f(l(n),t).quantizeSync(r,e)}async function c(e,n,{colorDistanceFormula:t,imageQuantization:a,onProgress:o}={}){return new Promise((i,u)=>{let s,c;const w=f(l(t),a).quantize(e,n),y=()=>{try{const n=w.next();n.done?i(s):(n.value.pointContainer&&(s=n.value.pointContainer),o&&o(n.value.progress),c=r(y))}catch(e){clearTimeout(c),u(e)}};c=r(y)})}function l(r="euclidean-bt709"){switch(r){case"cie94-graphic-arts":return new e.CIE94GraphicArts;case"cie94-textiles":return new e.CIE94Textiles;case"ciede2000":return new e.CIEDE2000;case"color-metric":return new e.CMetric;case"euclidean":return new e.Euclidean;case"euclidean-bt709":return new e.EuclideanBT709;case"euclidean-bt709-noalpha":return new e.EuclideanBT709NoAlpha;case"manhattan":return new e.Manhattan;case"manhattan-bt709":return new e.ManhattanBT709;case"manhattan-nommyde":return new e.ManhattanNommyde;case"pngquant":return new e.PNGQuant;default:throw new Error(`Unknown colorDistanceFormula ${r}`)}}function f(r,e="floyd-steinberg"){switch(e){case"nearest":return new n.NearestColor(r);case"riemersma":return new n.ErrorDiffusionRiemersma(r);case"floyd-steinberg":return new n.ErrorDiffusionArray(r,n.ErrorDiffusionArrayKernel.FloydSteinberg);case"false-floyd-steinberg":return new n.ErrorDiffusionArray(r,n.ErrorDiffusionArrayKernel.FalseFloydSteinberg);case"stucki":return new n.ErrorDiffusionArray(r,n.ErrorDiffusionArrayKernel.Stucki);case"atkinson":return new n.ErrorDiffusionArray(r,n.ErrorDiffusionArrayKernel.Atkinson);case"jarvis":return new n.ErrorDiffusionArray(r,n.ErrorDiffusionArrayKernel.Jarvis);case"burkes":return new n.ErrorDiffusionArray(r,n.ErrorDiffusionArrayKernel.Burkes);case"sierra":return new n.ErrorDiffusionArray(r,n.ErrorDiffusionArrayKernel.Sierra);case"two-sierra":return new n.ErrorDiffusionArray(r,n.ErrorDiffusionArrayKernel.TwoSierra);case"sierra-lite":return new n.ErrorDiffusionArray(r,n.ErrorDiffusionArrayKernel.SierraLite);default:throw new Error(`Unknown imageQuantization ${e}`)}}function w(r,e="wuquant",n=256){switch(e){case"neuquant":return new t.NeuQuant(r,n);case"rgbquant":return new t.RGBQuant(r,n);case"wuquant":return new t.WuQuant(r,n);case"neuquant-float":return new t.NeuQuantFloat(r,n);default:throw new Error(`Unknown paletteQuantization ${e}`)}}
},{"core-js/fn/set-immediate":"lYxK","./distance":"a183","./image":"d99G","./palette":"usjm"}],"Eoc4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"buildPalette",{enumerable:!0,get:function(){return u.buildPalette}}),Object.defineProperty(exports,"buildPaletteSync",{enumerable:!0,get:function(){return u.buildPaletteSync}}),Object.defineProperty(exports,"applyPalette",{enumerable:!0,get:function(){return u.applyPalette}}),Object.defineProperty(exports,"applyPaletteSync",{enumerable:!0,get:function(){return u.applyPaletteSync}}),exports.utils=exports.quality=exports.image=exports.palette=exports.distance=exports.conversion=exports.constants=void 0;var e=s(require("./constants"));exports.constants=e;var t=s(require("./conversion"));exports.conversion=t;var r=s(require("./distance"));exports.distance=r;var n=s(require("./palette"));exports.palette=n;var o=s(require("./image"));exports.image=o;var a=s(require("./quality"));exports.quality=a;var i=s(require("./utils"));exports.utils=i;var u=require("./basicAPI");function p(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function s(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=n?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}
},{"./constants":"TlpJ","./conversion":"T7GD","./distance":"a183","./palette":"usjm","./image":"d99G","./quality":"yZRa","./utils":"MRhM","./basicAPI":"oYDs"}],"Focm":[function(require,module,exports) {
"use strict";var e,t=r(require("image-q"));function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function r(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(r,o,l):r[o]=e[o]}return r.default=e,t&&t.set(e,r),r}function a(e){return e<10?"0"+e:e}function o(){var e=new Date;return a(e.getHours())+":"+a(e.getMinutes())+":"+a(e.getSeconds())+"."+e.getMilliseconds()}function l(e){e.forEach(function(e,t){document.getElementById("color-"+t).style.backgroundColor="rgb("+e.r+","+e.g+","+e.b+")"}),document.getElementById("loader-wrapper").style.display="none",document.getElementById("colors-wrapper").style.display="block"}setInterval(function(){document.getElementById("time").innerText=o()},50),window.Worker&&((e=new Worker("worker.732e25ac.js")).onmessage=function(e){l(e.data.points)}),document.getElementById("image-url-form").addEventListener("submit",function(n){n.preventDefault();var r=n.target.elements.url.value,a=document.getElementById("image");a.onload=function(){document.getElementById("image-link").href=r;var o=document.createElement("canvas");o.width=a.naturalWidth,o.height=a.naturalHeight;var i=o.getContext("2d");i.drawImage(a,0,0);var u=i.getImageData(0,0,a.naturalWidth,a.naturalHeight);if(e&&n.target.elements.worker.checked)e.postMessage({imageData:u});else{var c=t.utils.PointContainer.fromImageData(u);l(t.buildPaletteSync([c],{colors:4})._pointArray)}},document.getElementById("loader-wrapper").style.display="block",document.getElementById("colors-wrapper").style.display="none",a.src=r});
},{"image-q":"Eoc4","./worker.js":[["worker.732e25ac.js","iltZ"],"worker.732e25ac.js.map","iltZ"]}]},{},["Focm"], null)
//# sourceMappingURL=web-worker-demo.b2b85514.js.map